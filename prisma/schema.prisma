generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  UserID        String  @id @default(uuid())
  UserName      String
  UserIcon      String
  Organisation  Organisation[]
  Answer        Answer[]
  UserTag       UserTag[] 
  Article       Article[] 
}

model Issue {
  IssueID         String @id @default(uuid())
  IssueName       String
  IssueDetail     String
  Visibility      Boolean
  PostUserID      String
  Explanation     String
  OrganisationID  String?
  OptionID        String?
  ArticleID       String
  IssueTag        IssueTag[]
  Answer          Answer[]
  Option          Option? @relation(fields: [OptionID], references: [OptionID])
  Article         Article @relation(fields: [ArticleID], references: [ArticleID])
  Organisation    Organisation? @relation(fields: [OrganisationID], references: [OrganisationID])
}

model Option {
  OptionID      String @id @default(uuid())
  Option1       String
  Option2       String
  Option3       String
  Option4       String
  CorrectOption Int
  Issue         Issue[]
}

model Article {
  ArticleID       String @id @default(uuid())
  ArticleTitle    String
  ArticleLink     String
  ArticleUserName String
  User            User @relation(fields: [ArticleUserName], references: [UserID])
  Issue          Issue[]
  ArticleTag      ArticleTag[]
  Organisation    Organisation[]
}

model Answer {
  AnswerID       String @id @default(uuid())
  Decision       Boolean
  IssueID        String
  AnswerUserID    String
  SelectOptionID String
  User           User @relation(fields: [AnswerUserID], references: [UserID])
  Issue          Issue @relation(fields: [IssueID], references: [IssueID])
}

model Organisation {
  OrganisationID String @id @default(uuid())
  OrganisationName String
  discruption     String
  authority       String
  UserID          String?
  ArticleID       String?
  Issue          Issue[] 
  User            User? @relation(fields: [UserID], references: [UserID])
  Article         Article? @relation(fields: [ArticleID], references: [ArticleID])

}

model Tag {
  TagID      String @id @default(uuid())
  TagName    String
  IssueTag   IssueTag[]
  ArticleTag ArticleTag[]
  UserTag    UserTag []
}

model UserTag {
  UserTagID String @id @default(uuid())
  UserID    String
  TagID     String
  User      User @relation(fields: [UserID], references: [UserID])
  Tag       Tag @relation(fields: [TagID], references: [TagID])
}

model ArticleTag {
  ArticleTagID String @id @default(uuid())
  ArticleID    String
  TagID        String
  Article      Article @relation(fields: [ArticleID], references: [ArticleID])
  Tag          Tag @relation(fields: [TagID], references: [TagID])
}

model IssueTag {
  IssueTagID String @id @default(uuid())
  IssueID    String
  TagID      String
  Issue      Issue @relation(fields: [IssueID], references: [IssueID])
  Tag        Tag @relation(fields: [TagID], references: [TagID])
}